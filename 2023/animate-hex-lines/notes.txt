# 2023-09-26
- Split off from draw-hex-lines.
  - Keep draw-hex-lines preserved.
- Editor architecture:
  - Animation editor
    - Animation data
      - Sprite map
      - Audio track
      - Root sprite
    - Root sprite editor
      - Editing state
        - Focus
          - Time
          - Background time
          - Layers selected
          - Keyframes selected
          - Items selected
          - Drawing item
          - Selected tool
          - Tool state
        - Viewport
          - Timeline camera
          - Display camera
      - Nested overlay sprite editor
- Editor state is key to architecture.
  - Might be better as ADT.
  - ADT state space:
    struct EditorState {
      sprite: SpriteId,
      playState: PlayState,
      timelineCamera: CameraState,
      displayCamera: CameraState,
      currentFrame: u32,
      backgroundFrame: Option<u32>,
      selection: SelectionState,
      selectedTool: ToolId,
      nestedEditor: Option<EditorState>,
    }
    struct PlayState {
      playing: bool,
      currentFrame: u32,
      startFrame: Option<u32>,
      endFrame: Option<u32>,
    }
    struct CameraState {
      x: f32,
      y: f32,
      zoom: f32,
    }
    enum SelectionState {
      LayerSelect(Vec<LayerId>),
      MultiKeyframeSelect(Vec<KeyframeId>),
      FrameSelect {
        keyframe: Option<KeyframeId>,
        selectedItems: Vec<ItemId>,
        drawingItem: Option<ItemId>,
      },
    }

